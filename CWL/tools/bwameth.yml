#!/usr/bin/env cwl-runner
cwlVersion: "cwl:draft-3"
id: '#bwameth'
label: bwameth
class: CommandLineTool

requirements: []
hints:
  - class: ResourceRequirement
    coresMin: 1
    ramMin: 15000
#    outdirMin: 512000
#    description: "the process requires at least 15G of RAM"
    

inputs:
- id: '#threads'
  type:
  - 'null'
  - int
  label: ''
  description: ''
  #streamable: false
  inputBinding:
    position: 1
    prefix: --threads
    separate: true
    
  #required: false
- id: '#reference'
  type: File
  label: ''
  description: the reference fasta file
  secondaryFiles:
    - .bwameth.c2t
    - .bwameth.c2t.amb
    - .bwameth.c2t.ann
    - .bwameth.c2t.bwt
    - .bwameth.c2t.pac
    - .bwameth.c2t.sa
  inputBinding:
    position: 2
    prefix: --reference
    separate: true


- id: '#read1'
  type: File
  label: ''
  description: the input fastq file with the first mate
  inputBinding:
    position: 3
    separate: true
- id: '#read2'
  type: File
  label: ''
  description: the input fastq file with the second mate
  #streamable: false
  inputBinding:
    position: 4
    separate: true
  #required: false
- id: '#alignment_filename'
  type: string
- id: '#lib_type'
  type: string
  description: |
    Library type, directional or non-directional  
  
outputs:
- id: '#alignment'
  type: File
  outputBinding:
   glob: $(inputs['alignment_filename']).sam

baseCommand:
- bwameth.py
stdout: $(inputs['alignment_filename']).sam
#stderr: $(inputs['alignment_filename']).log
arguments:
- valueFrom: ${
      if(inputs.lib_type=="directional"){
        return null;
      }else{
        return "--non-directional";
      }
    }
  position: 200
