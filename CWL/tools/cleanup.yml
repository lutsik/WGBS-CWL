#!/usr/bin/env cwl-runner
cwlVersion: "cwl:draft-3"
class: CommandLineTool
#
requirements:
#- $import: envvar-global.yml
#- $import: alea-docker.yml
 - class: InlineJavascriptRequirement
 - class: ShellCommandRequirement

inputs:
- id: "files"
  type:
    type: array
    items: string
  description: |
    the input files to remove

- id: "data_dir"
  type: string
  description: |
    the working directory with files

- id: "do_clean"
  type: boolean
  description: | 
    action switch
  
outputs:
- id: "output"
  type:
    type: array
    items: string
  outputBinding:
    outputEval: $(inputs.files)
    
baseCommand: ["cd"]
arguments:
  - valueFrom: $(inputs.data_dir)
    position: 1
  - valueFrom: ";"
    position: 2
    shellQuote: false
  - valueFrom: |
     ${ 
         if(inputs.do_clean){
            return "rm";
         }else{
            return "ls";
         }
     }
    position: 3
  - valueFrom: $(inputs.files)
    position: 100000