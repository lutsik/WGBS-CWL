#!/usr/bin/env cwl-runner

class: ExpressionTool
requirements:
  - class: InlineJavascriptRequirement
cwlVersion: cwl:draft-3

inputs:
  - id: fastq_arrays
    type:
      type: array
      items:
        type: array
        items: string

outputs:
  - id: flattened_fastq_array
    type:
      type: array
      items: string
       
expression: "${

            var rearranged = [];
            for(var i=0; i<inputs.fastq_arrays.length; i++){
              for(var j=0; j<inputs.fastq_arrays[i].length; j++){
                   rearranged[rearranged.length] = inputs.fastq_arrays[i][j];
              }
            }

            var output = {};
            output['flattened_fastq_array'] = rearranged;
            return output;
          }"
